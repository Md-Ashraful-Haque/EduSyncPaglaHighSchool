# Generated by Django 5.1.4 on 2025-07-22 16:27

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('ims_01_institute', '0001_initial'),
        ('ims_02_account', '0001_initial'),
        ('ims_03_exam', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='StudentSubjectResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('letter_grade', models.CharField(default='None', help_text='The final letter grade for the student (e.g., A+, Fail).', max_length=10, verbose_name='Letter Grade')),
                ('gpa', models.FloatField(default=0.0, help_text='The GPA for the student across all subjects.', verbose_name='GPA')),
                ('total_obtained_marks', models.PositiveIntegerField(default=0, help_text='The total marks obtained across all subjects.', verbose_name='Total Obtained Marks')),
                ('classwise_merit', models.PositiveIntegerField(default=0, help_text='The merit position within the class.', verbose_name='Class Wise Merit')),
                ('sectionwise_merit', models.PositiveIntegerField(default=0, help_text='The merit position within the section.', verbose_name='Section Wise Merit')),
                ('total_fail_subjects', models.PositiveIntegerField(default=0, help_text='The number of subjects the student failed.', verbose_name='Total Fail Subjects')),
                ('class_instance', models.ForeignKey(help_text='The class (e.g., Six) of the student.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_01_institute.class', verbose_name='Class')),
                ('exam', models.ForeignKey(help_text='The exam for which the result is recorded.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_03_exam.examforims', verbose_name='Exam')),
                ('group', models.ForeignKey(help_text='The group (e.g., Science, Arts) of the student.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_01_institute.group', verbose_name='Group')),
                ('institute', models.ForeignKey(help_text='The institute associated with the result.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_01_institute.institute', verbose_name='Institute')),
                ('section', models.ForeignKey(help_text='The section (e.g., A, B) of the student.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_01_institute.section', verbose_name='Section')),
                ('student', models.ForeignKey(help_text='The student associated with this result.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_02_account.student', verbose_name='Student')),
                ('year', models.ForeignKey(help_text='The academic year of the result.', on_delete=django.db.models.deletion.CASCADE, related_name='singleresults', to='ims_01_institute.year', verbose_name='Year')),
            ],
            options={
                'verbose_name': 'Result',
                'verbose_name_plural': '01 Results',
            },
        ),
        migrations.CreateModel(
            name='SubjectForResult',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('student_from_result_table', models.ForeignKey(help_text='The overall result record this subject belongs to.', on_delete=django.db.models.deletion.CASCADE, related_name='subjectforresult', to='ims_04_result.studentsubjectresult', verbose_name='Student Result')),
                ('subject', models.ForeignKey(help_text='The subject (e.g., Math, Science) for this result.', on_delete=django.db.models.deletion.CASCADE, related_name='subjectforresult', to='ims_01_institute.subjectforims', verbose_name='Subject')),
            ],
            options={
                'verbose_name': 'Subject Result',
                'verbose_name_plural': '02 Subject for Result',
            },
        ),
        migrations.CreateModel(
            name='SubjectHighestMarks',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('roll', models.PositiveIntegerField(default=0, help_text='The Roll Number of student who achieved highest marks for this subject.', verbose_name='Student Roll')),
                ('highest_marks', models.PositiveIntegerField(help_text='The highest total marks achieved for this subject.', verbose_name='Highest Marks')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='The timestamp of the last update to this record.', verbose_name='Last Updated')),
                ('section', models.ForeignKey(help_text='The section where the highest marks were achieved.', on_delete=django.db.models.deletion.CASCADE, to='ims_01_institute.section', verbose_name='Section')),
                ('subject', models.ForeignKey(help_text='The subject for which the highest marks are recorded.', on_delete=django.db.models.deletion.CASCADE, related_name='highest_marks_records', to='ims_01_institute.subjectforims', verbose_name='Subject')),
            ],
            options={
                'verbose_name': 'Subject Highest Marks',
                'verbose_name_plural': '04 Subject Highest Marks',
            },
        ),
        migrations.CreateModel(
            name='TypewiseMarksForSubject',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('marks', models.IntegerField(default=-1, help_text='The marks obtained for this mark type.', verbose_name='Marks')),
                ('mark_type', models.ForeignKey(help_text='The type of mark (e.g., MCQ, Theory).', on_delete=django.db.models.deletion.CASCADE, related_name='typewisemarks', to='ims_01_institute.marktypeforsubject', verbose_name='Mark Type')),
                ('subject', models.ForeignKey(help_text='The subject result this mark belongs to.', on_delete=django.db.models.deletion.CASCADE, related_name='typewisemarksforsubject', to='ims_04_result.subjectforresult', verbose_name='Subject')),
            ],
            options={
                'verbose_name': 'Typewise Mark',
                'verbose_name_plural': '03 Typewise Marks',
            },
        ),
        migrations.AddIndex(
            model_name='studentsubjectresult',
            index=models.Index(fields=['institute', 'year', 'class_instance', 'group', 'section', 'student', 'exam'], name='ims_04_resu_institu_03383a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentsubjectresult',
            unique_together={('student', 'exam')},
        ),
        migrations.AlterUniqueTogether(
            name='subjectforresult',
            unique_together={('student_from_result_table', 'subject')},
        ),
        migrations.AddIndex(
            model_name='subjecthighestmarks',
            index=models.Index(fields=['subject', 'highest_marks'], name='ims_04_resu_subject_bd210e_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='subjecthighestmarks',
            unique_together={('subject',)},
        ),
        migrations.AlterUniqueTogether(
            name='typewisemarksforsubject',
            unique_together={('subject', 'mark_type')},
        ),
    ]
